# Defining how to store recipes

## Recipe

- id: int
- name: str
- description: str
- code: str

optional:

- keywords: str
- schema: str
- argument types: str

## Filetype

- json: too verbose, not human readable
- yaml: seems to be the best option
- toml: more verbose than yaml, array of object especially verbose
- csv: not human readable, not easy to edit, good python support

after using yaml for a while, i'm not sure if it's the best option. However since it doesn't make a big difference, i'll stick with it for now.
json might be better since it's more widely used.

proposed format:

```yaml
recipes:
  - id: 1
    name: "rename columns"
    description: "rename columns"
    code: "tbd"
    keywords: "tbd"
  - id: 2
    name: "drop columns"
    description: "drop columns"
    code: "tbd"
    keywords: "tbd"
```

Seems reasonable until we have an absurd amount of recipes. How many recipes are possible should be investigated.

## Referring to a recipe with name or id

Both are possible, if we refer to a recipe with name, we need to make sure that the name is unique.
If we refer to a recipe with id, then removing a recipe is complicated without creating holes in the numbering.

For now i'm going with id, since it's easier to implement.

## Code

The code field either shows an example of the code, or later an actual snippet that automatically uses the right column names, df name, etc. snippets like how vscode does it seems reasonable.

Using [VSCode Snippets](https://code.visualstudio.com/docs/editor/userdefinedsnippets) as basis.

[EBNF](https://en.wikipedia.org/wiki/Extended_Backus-Naur_form) for VSC snippets:

```ebnf
any = tabstop | placeholder | choice | variable | text
tabstop     ::= '$' int
                | '${' int '}'
                | '${' int  transform '}'
placeholder ::= '${' int ':' any '}'
choice      ::= '${' int '|' text (',' text)* '|}'
variable    ::= '$' var | '${' var '}'
                | '${' var ':' any '}'
                | '${' var transform '}'
transform   ::= '/' regex '/' (format | text)+ '/' options
format      ::= '$' int | '${' int '}'
                | '${' int ':' '/upcase' | '/downcase' | '/capitalize' | '/camelcase' | '/pascalcase' '}'
                | '${' int ':+' if '}'
                | '${' int ':?' if ':' else '}'
                | '${' int ':-' else '}' | '${' int ':' else '}'
regex       ::= JavaScript Regular Expression value (ctor-string)
options     ::= JavaScript Regular Expression option (ctor-options)
var         ::= [_a-zA-Z] [_a-zA-Z0-9]*
int         ::= [0-9]+
text        ::= .*
if          ::= text
else        ::= text
```

Changes to be made:

- automatically add the right rows and columns to the snippet.
- get rid of unnecessary parts of the EBNF.

## Autogenerating recipes

Could scrape the pandas documentation and generate recipes from there.

Update: scraped the pandas documentation, but it's not very useful. The examples are good, and the documentation is consistent but it's not very useful for generating recipes since it has an entry per function, not per task. Furthermore, the examples are not always very good.

## Keywords

Possibly autogenerated.
